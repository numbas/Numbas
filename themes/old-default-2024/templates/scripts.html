<!-- mathjax stuff -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
            extensions: ['begingroup.js']
        },
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            displayMath: [['\\[','\\]'], ['$$','$$']],
            processEscapes: true
        },
        "CommonHTML": {
            mtextFontInherit: true
        },
        skipStartupTypeset: true,
        displayAlign: "center",
        displayIndent: "0.1em"
    });
    MathJax.Hub.processSectionDelay = 0;
</script>
<script type="text/javascript" src="{{options.mathjax_url}}/MathJax.js?config=TeX-AMS_CHTML.js"></script>

<!-- numbas stuff -->
<script charset="UTF-8" type="text/javascript" src="scripts.js?build_time={{build_time}}" charset="utf-8"></script>
{% if not dont_start_exam %}
<numbas-exam>
    <script type="application/numbas-exam">{{options.source}}</script>
</numbas-exam>
<script>
    Numbas.queueScript('go',['start-exam'], function() {
        Numbas.locale.set_preferred_locale('{{options.locale}}');
    });
    if(document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', Numbas.checkAllScriptsLoaded);
    } else {
        Numbas.checkAllScriptsLoaded();
    }
    const numbas_exam = document.createElement('numbas-exam');
    numbas_exam.append(document.getElementById('exam-source'));
    document.body.append(numbas_exam);
</script>
{% else %}
<script type="module" src="{{options.load_exam_script_url}}"></script>
{% endif %}
