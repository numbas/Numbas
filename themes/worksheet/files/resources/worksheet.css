/** Generator styles
 */

@layer variables {
    :root {
        --page-margin-top: 10;
        --page-margin-left: 10;
        --page-margin-right: 10;
        --page-margin-bottom: 10;

        --light-faint-bg-mix: 3%;
        --dark-faint-bg-mix: 95%;
    }
}

body.worksheet {
    overflow: hidden;

    & #generator {
        margin-bottom: var(--spacing);
        background: var(--main-color);

        & > * {
            margin-bottom: var(--spacing);
            padding: var(--spacing);
        }

        & p {
            margin-bottom: var(--third-space);
        }

        & .controls {
            display: grid;
            grid-gap: var(--spacing);
            margin: 0 0 var(--spacing) 0;

            & > :is(label, button) {
                grid-column: 1;
                justify-self: end;
                margin-bottom: 0;
            }

            & input {
                border: none;
                justify-self: start;

                &[type="radio"] {
                    margin-right: var(--half-space);
                }
            }
        }

        & #print {
            display: grid;
            grid-gap: var(--half-space);
        }

        & #sheettype {
            list-style-type: none;
            margin-left: 0;
            padding-left: 0;

            & li:hover {
                cursor: pointer;
            }
        }

        & #margins-input {
            display: grid;
            grid-template: 
                ". top ."
                "left . right"
                ". bottom ." 
                /
                auto auto auto;
            justify-self: start;

            & #page-margin-top {grid-area: top }
            & #page-margin-left {grid-area: left }
            & #page-margin-bottom {grid-area: bottom }
            & #page-margin-right {grid-area: right }
        }

    }

    & .questionsheet .advi.eContainer,
      .answersheet:not(.answersheet-show-question-content) :is(.statement, .statement + hr, .parts),
      .answersheet .student.answer,
      .questionsheet .correct.answer,
      #examList:not(.show-exam-id) .examID,
      #examList > .exam:not([data-status="done"]) {
        display: none;
    }

    & .exam {
        & img {
            max-width: 100%;
        }
        & :is(h1,h2,h3,h4,h5,h6) {
            margin-top: 0;
            margin-bottom: var(--half-space);
        }
        & .number {
            font-size: 1.3em;
            margin-right: var(--half-space);
            margin-bottom: var(--spacing);
        }
        & button {
            background-color: var(--main-color);
            border: 2px solid var(--text-color);
            border-radius: 3px;
        }

        & .student.answer > .warnings,
          .warning-icon,
          .steps,
          .penaltyMessage,
          .jme-preview,
          .answered-state,
          matrix-input .matrix-size,
          .part .feedback-icon,
          .part .feedbackMessages,
          .navBar,
          #partFeedback,
          .questionMenu,
          .btn {
            display: none;
        }

        & .part .correct.answer.alert {
            border: none;
            background: none;
            padding: 0;
        }

        & .partheader {
            margin-left: 0;
        }
        & .question .parts {
            margin-left: 0;
        }
        & .statement, .exam .advice {
            margin: var(--spacing) 0;
            padding-top: calc(0.2 * var(--spacing));
            padding-left: 0;
            padding-bottom: calc(0.1 * var(--spacing));
            background: none;
        }
        & #questionContainer p {
            line-height: var(--spacing);
        }
        & hr {
            max-width: calc(0.4 * var(--readable-width));
            border: none;
            height:1px;
            background: var(--medium-line-color);
        }
        & #questionNameDisplay {
            font-size: 2em;
        }

        & > .intro {
            padding: var(--spacing);
            margin: var(--double-space) 0;
        }

        & .logo img {
            height: 50%;
        }
        & #questionContainer .colwrap {
            width: 100%;
            left: initial;
        }
        & #questionContainer .col1wrap {
            width: 100%;
            right: auto;
            padding: initial;
            position:initial;
        }
        & .questionList {
            clear: both;
            list-style-type: none;
            max-height: none;
        }

        & input[type="text"], .exam input[type="number"] {
            border:none;
            border-bottom: 1px solid;
            height: 1.5em;
            width: 6em;
        }

        & .question > .marks {
            text-align: right;
            font-weight: bold;
            margin-top: var(--spacing);
        }

        & .partFeedback {
            text-align: right;
            font-style: italic;
        }
    }
}

@page {
    margin: 
        calc(1mm * var(--page-margin-top))
        calc(1mm * var(--page-margin-right))
        calc(1mm * var(--page-margin-bottom))
        calc(1mm * var(--page-margin-left))
    ;
}

@media screen {
    .screen-only {
        display: none !important;
    }
    .print-only {
        display: initial;
    }

    body.worksheet {
        & #everything {
            display: grid;
        }

        & #examList {
            width: 210mm;
            justify-self: center;
            background: var(--background-color);
        }
    }
}

@media screen and (orientation: landscape) {
    body.worksheet {
        & #everything {
            display: grid;
            grid-gap: var(--spacing);
            grid-template: auto / 20em 1fr;
            max-height: 100vh;
        }

        & #generator {
            height: 100vh;
            overflow-y: auto;
            border-right: var(--half-space) solid var(--main-darker);
            margin: 0;

            & .controls {
                grid-gap: calc(0.2 * var(--spacing));
            }

            & .controls > :is(label, button) {
                grid-column: 1;
                justify-self: start;
            }

            & .controls input, #margins-input {
                justify-self: start;
                margin-left: var(--spacing);
                margin-bottom: var(--spacing);
                align-self: start;
            }
        }


        & #examList {
            overflow-y: auto;
            max-height: 100vh;
        }
    }
}
@media (orientation: portrait) {
    body.worksheet #generator .controls {
        grid-template-columns: max-content 1fr;
    }
}
@media (orientation: portrait) and (max-width: 32em) {
    body.worksheet #generator .controls {
        grid-template-columns: 1fr;

        & > :is(label,button) {
            justify-self: start;
        }
    }
}

@media print {
    body.worksheet #everything {
        overflow-y: hidden;
        display: block;

        & .exam:not(:last-child) {
            page-break-after: always;
            break-after: always;
        }
        & #examList.break-between-questions .question {
            page-break-before: always;
            break-before: always;
        }
    }

    .part {
        break-inside: avoid;
    }
}


@media screen {
    body.worksheet .exam:not(.shown) {
        display: none;
    }
    .question, #infoDisplay {
        max-height: none;
    }
}

@media print {
    body.worksheet {
        font-size: calc(var(--text-size) * 14pt);

        & #generator {
            display: none;
        }
    }
}


@media print {
    .invisible:not(.print-visible) {
        display: none;
    }
}
